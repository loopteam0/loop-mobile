<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="tabs/movies-list"></ion-back-button>
    </ion-buttons>
    <ion-title *ngIf="movie">
      {{ movie.title }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="spinner" *ngIf="loading"></div>

  <ion-card class="error-card animated bounceIn" *ngIf="error">
    <ion-card-content>
      <div class="auto">
        <ion-icon class="slideInDown animated infinite" slot="start" name="arrow-down"></ion-icon>
      </div>
      <h1>ðŸ¤•</h1>
      <h3>Uh Oh</h3>
      <h5>Sorry, something went wrong.</h5>
      <div class="auto">
        <span>Slide down to Retry </span>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- movie banner -->
  <div *ngIf="movie">
    <div class="movie-header">
      <img class='animated fadeIn' *ngIf="fanart" [src]="setBackground(fanart.images.fanart)" />
    </div>

    <div class="movie-content animated slideInLeft" padding>
      <div class="movie-summary">
        <div class="poster">
          <div class="content">
            <img src="{{ movie.medium_cover_image }}" />
          </div>
        </div>

        <div class="item-content">
          <span class="title">{{ movie.title }}</span>
          <span class="genre ">{{ movie.genres | join: ' | ' }}</span>
          <span class="country">{{ movie.download_count }} downloads |
            {{ movie.mpa_rating || '' }}</span>

          <span class="line">
            <span class="date">{{ movie.date_uploaded | date: 'mediumDate' }} |
            </span>
            <span class="time"> {{ movie.runtime || 0 | duration }}</span>
          </span>

          <!-- services rating -->
          <div class="ratings">
            <div class="imdb">
              <span>imdb <span class="nb">{{ movie.rating }}</span></span>
            </div>
          </div>
        </div>
      </div>

      <div class="movie-more">
        <!-- <span><span class="key">Director: </span>{{movie.director}}</span> -->
        <span class="description"><span class="key">Storyline: </span>
          {{ movie.description_intro }}</span>
      </div>

      <div class="movie-more-1">
        <span><span class="key">Cast: </span></span>
        <ion-slides [options]="sliderConfig">
          <ion-slide *ngFor="let item of movie.cast">
            <div>
              <div class="img">
                <img [src]="item.url_small_image" alt="" />
              </div>
              <p>{{ item.name }}</p>
              <p class="small">as</p>
              <p class="characterName">{{ item.character_name }}</p>
            </div>
          </ion-slide>
        </ion-slides>
      </div>
    </div>
  </div>

  <ion-fab *ngIf="movie" vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button class="animated fadeIn">
      <ion-icon name="download"></ion-icon>
    </ion-fab-button>
    <ion-fab-list *ngIf="movie.torrents" side="start">
      <ion-fab-button *ngFor="let item of movie.torrents" (click)="download(item.url)">{{ item.quality }}
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>
</ion-content>